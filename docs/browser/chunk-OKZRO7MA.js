import{a as pe,b as fe}from"./chunk-RCJALSRH.js";import{a as me}from"./chunk-L2WOCMT7.js";import{a as H,b as _e}from"./chunk-PJFUTVME.js";import{a as j,b as U,e as z,g as le,h as Q,i as R,j as q,k as se,m as de}from"./chunk-VEIFBABU.js";import{a as ue}from"./chunk-L5VL324W.js";import{$ as o,A as F,B as L,F as d,G as u,Ha as A,Ia as ie,Ja as ne,La as oe,M as X,Ma as re,Na as ae,O as s,P as v,W as w,Wa as Y,Xa as ce,Y as f,aa as r,ba as M,ea as x,fa as m,ga as p,ja as k,ka as I,la as N,ma as l,na as P,oa as D,pa as g,qa as h,ra as C,u as $,v as O,va as te,x as ee,ya as B}from"./chunk-QE42GDAH.js";import{a as V,e as Z,f as y}from"./chunk-CWTPBX7D.js";var b=Z(ue());var T=class{constructor(){this.idProductType=0,this.productType="",this.description="",this.state=""}};var W=class{constructor(){this.idProduct=0,this.productName="",this.productDescription="",this.imgProduct="",this.price=0,this.productTypeId=0,this.unitOfMesureId=0,this.unitOfMesure=new pe,this.productType=new T}};var K=(()=>{let a=class a{constructor(t){this.http=t,this.urlbackend=`${ce}/ProducType`}listarTipoProductos(t){let e=new re().set("state",t);return this.http.get(`${this.urlbackend}`,{params:e})}actualizarTipoProductos(t){return this.http.put(this.urlbackend,t)}crearTipoProductos(t){return this.http.post(this.urlbackend,t)}};a.\u0275fac=function(e){return new(e||a)(ee(ae))},a.\u0275prov=$({token:a,factory:a.\u0275fac,providedIn:"root"});let c=a;return c})();var be=["editModal"],we=["updateModal"];function Se(c,a){if(c&1){let n=x();o(0,"div",9)(1,"div",10),M(2,"img",11),o(3,"h5",12),l(4),r(),o(5,"p",13),l(6),r(),o(7,"p",13)(8,"strong"),l(9,"Precio Actual:"),r()(),o(10,"div",14),M(11,"input",15),r(),o(12,"div",16)(13,"button",17),m("click",function(){let e=d(n).$implicit,i=p();return u(i.openEditModal(e))}),M(14,"i",18),r(),o(15,"button",17),m("click",function(){let e=d(n).$implicit,i=p();return u(i.openUpdateModal(e))}),M(16,"i",19),r()()()()}if(c&2){let n=a.$implicit,t=p();s(2),f("src",t.urlBackend+n.imgProduct,X),s(2),P(n.productName),s(2),D(" ",n.productDescription," "),s(5),f("value","S/."+n.price)}}function ve(c,a){if(c&1&&(o(0,"option",37),l(1),r()),c&2){let n=a.$implicit;f("value",n.idProductType),s(),P(n.productType)}}function Te(c,a){if(c&1&&(o(0,"option",37),l(1),r()),c&2){let n=a.$implicit;f("value",n.idUnitOfMesure),s(),P(n.unitName)}}function Ee(c,a){if(c&1){let n=x();o(0,"div",20)(1,"h5",21),l(2),r(),o(3,"button",22),m("click",function(){let e=d(n).$implicit;return u(e.dismiss("Cross click"))}),r()(),o(4,"div",23)(5,"div",24)(6,"label",25),l(7,"Nombre del Producto"),r(),o(8,"input",26),C("ngModelChange",function(e){d(n);let i=p();return h(i.selectedProduct.productName,e)||(i.selectedProduct.productName=e),u(e)}),r()(),o(9,"div",24)(10,"label",27),l(11,"Descripcion del Producto"),r(),o(12,"input",28),C("ngModelChange",function(e){d(n);let i=p();return h(i.selectedProduct.productDescription,e)||(i.selectedProduct.productDescription=e),u(e)}),r()(),o(13,"div",24)(14,"label",29),l(15,"Precio"),r(),o(16,"input",30),C("ngModelChange",function(e){d(n);let i=p();return h(i.selectedProduct.price,e)||(i.selectedProduct.price=e),u(e)}),m("keydown",function(e){d(n);let i=p();return u(i.onKeyDown(e))}),r()(),o(17,"div",24)(18,"label",31),l(19,"Tipo de Producto"),r(),o(20,"select",32),C("ngModelChange",function(e){d(n);let i=p();return h(i.selectedProduct.productTypeId,e)||(i.selectedProduct.productTypeId=e),u(e)}),w(21,ve,2,2,"option",33),r()(),o(22,"div",24)(23,"label",31),l(24,"Unidad de Medida"),r(),o(25,"select",32),C("ngModelChange",function(e){d(n);let i=p();return h(i.selectedProduct.unitOfMesureId,e)||(i.selectedProduct.unitOfMesureId=e),u(e)}),w(26,Te,2,2,"option",33),r()()(),o(27,"div",34)(28,"button",35),m("click",function(){let e=d(n).$implicit;return u(e.dismiss("Cross click"))}),l(29,"Cancelar"),r(),o(30,"button",36),m("click",function(){let e=d(n).$implicit,i=p();return u(i.saveChanges(e))}),l(31),r()()}if(c&2){let n=p();s(2),P(n.isEditMode?"Editar Producto":"Crear Producto"),s(6),g("ngModel",n.selectedProduct.productName),s(4),g("ngModel",n.selectedProduct.productDescription),s(4),g("ngModel",n.selectedProduct.price),s(4),g("ngModel",n.selectedProduct.productTypeId),s(),f("ngForOf",n.tipoProductos),s(4),g("ngModel",n.selectedProduct.unitOfMesureId),s(),f("ngForOf",n.unitOfMesureList),s(5),P(n.isEditMode?"Guardar Cambios":"Crear Insumo")}}function Ve(c,a){if(c&1){let n=x();o(0,"div",20)(1,"h5",21),l(2,"Actualizar Imagen"),r(),o(3,"button",22),m("click",function(){let e=d(n).$implicit;return u(e.dismiss("Cross click"))}),r()(),o(4,"div",23)(5,"div",24)(6,"label",25),l(7,"Nombre del Producto"),r(),o(8,"input",38),C("ngModelChange",function(e){d(n);let i=p();return h(i.selectedProduct.productName,e)||(i.selectedProduct.productName=e),u(e)}),r()(),o(9,"div",24),M(10,"img",11),o(11,"label",39),l(12,"Seleccione la Imagen"),r(),o(13,"input",40),m("change",function(e){d(n);let i=p();return u(i.onFileSelected(e))}),r()()(),o(14,"div",34)(15,"button",35),m("click",function(){let e=d(n).$implicit;return u(e.dismiss("Cross click"))}),l(16,"Cancelar"),r(),o(17,"button",36),m("click",function(){let e=d(n).$implicit,i=p();return u(i.updateImage(e))}),l(18,"Guardar Cambios"),r()()}if(c&2){let n=p();s(8),g("ngModel",n.selectedProduct.productName),f("disabled",!0),s(2),f("src",n.urlBackend+n.selectedProduct.imgProduct,X)}}var he=(()=>{let a=class a{constructor(t,e,i,_){this.productosService=t,this.modalService=e,this.insumosService=i,this.productTypeService=_,this.productos=[],this.urlBackend="https://20.206.205.121:5000",this.isEditMode=!1,this.selectedProduct=new W,this.unitOfMesureList=[],this.tipoProductos=[]}ngOnInit(){this.listarProducto(),this.listarUnidades(),this.listarTipoProducto()}listarProducto(){return y(this,null,function*(){let t=yield this.productosService.listarProductos().toPromise();this.productos=t})}listarUnidades(){return y(this,null,function*(){let t=yield this.insumosService.listarUnidades().toPromise();this.unitOfMesureList=t})}listarTipoProducto(){return y(this,null,function*(){let e=yield this.productTypeService.listarTipoProductos("Activo").toPromise();this.tipoProductos=e})}onFileSelected(t){this.selectedFile=t.target.files[0]}openEditModal(t){this.selectedProduct=V({},t),this.isEditMode=!0,this.modalService.open(this.editModal,{ariaLabelledBy:"editModalLabel"})}openCreateModal(){this.selectedProduct=new W,this.isEditMode=!1,this.modalService.open(this.editModal,{ariaLabelledBy:"openCreateModal"})}openUpdateModal(t){this.selectedProduct=V({},t),this.modalService.open(this.updateModal,{ariaLabelledBy:"openUpdateModal"})}updateImage(t){return y(this,null,function*(){if(this.selectedFile)try{yield this.productosService.actualizarImagen(this.selectedProduct.idProduct,this.selectedFile).toPromise(),this.listarProducto(),b.default.fire("Imagen actualizada!","La imagen del producto ha sido actualizada.","success")}catch{b.default.fire("Error","Hubo un error al actualizar la imagen.","error")}else b.default.fire("Error","Por favor seleccione una imagen.","error");t.close()})}saveChanges(t){return y(this,null,function*(){if((yield b.default.fire({title:"Cuidado",text:"\xBFEst\xE1 seguro de guardar los cambios?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xED",cancelButtonText:"No"})).isConfirmed)try{if(this.isEditMode)yield this.productosService.actualizarProducto(this.selectedProduct).toPromise(),this.listarProducto(),b.default.fire("Cambios guardados!","El elemento ha sido actualizado.","success");else{let i={productName:this.selectedProduct.productName,productDescription:this.selectedProduct.productDescription,price:this.selectedProduct.price,idProductType:Number(this.selectedProduct.productTypeId),idUnitOfMesure:Number(this.selectedProduct.unitOfMesureId)};yield this.productosService.crearProducto(i).toPromise(),this.listarProducto(),b.default.fire("Cambios guardados!","El elemento ha sido creado.","success")}}catch{b.default.fire("Error","Hubo un error al guardar los cambios.","error")}else b.default.fire("Cancelado","La acci\xF3n ha sido cancelada","info");t.close()})}onKeyDown(t){let e=t.keyCode||t.which;(e<48||e>57)&&e!==8&&e!==46&&e!==37&&e!==39&&e!==190&&(t.preventDefault(),b.default.fire("Cuidado!","Solo puede ingresar n\xFAmeros","info")),(e===189||e===109)&&(t.preventDefault(),b.default.fire("Cuidado!","No puede ingresar n\xFAmeros negativos","info"))}};a.\u0275fac=function(e){return new(e||a)(v(me),v(H),v(fe),v(K))},a.\u0275cmp=F({type:a,selectors:[["app-products-maintenance"]],viewQuery:function(e,i){if(e&1&&(k(be,5),k(we,5)),e&2){let _;I(_=N())&&(i.editModal=_.first),I(_=N())&&(i.updateModal=_.first)}},decls:12,vars:1,consts:[["editModal",""],["updateModal",""],[1,"container-fluid"],[1,"card-header","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],["type","button",1,"btn","btn-outline-success"],[1,"fa-solid","fa-plus","fa-2xl",2,"color","#63E6BE",3,"click"],[1,"d-flex","flex-wrap","row"],["class","card mx-4 mb-3","style","width: 18rem",4,"ngFor","ngForOf"],[1,"card","mx-4","mb-3",2,"width","18rem"],[1,"card-body"],["alt","...",1,"card-img-top",3,"src"],[1,"card-title"],[1,"card-text"],[1,"input-group","mb-3"],["type","text","placeholder","Cantidad","aria-label","Cantidad","aria-describedby","basic-addon1","id","quantityInput","disabled","",1,"form-control",3,"value"],[1,"d-flex","justify-content-center"],["type","button",1,"btn","btn-transparent",3,"click"],[1,"fa-regular","fa-pen-to-square","fa-xl",2,"color","#2657ab"],[1,"fa-solid","fa-upload","fa-xl",2,"color","#c3a537"],[1,"modal-header"],["id","createModalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mb-3"],["for","createSupplieName",1,"form-label"],["type","text","id","createSupplieName",1,"form-control",3,"ngModelChange","ngModel"],["for","createSupplieDescription",1,"form-label"],["type","text","id","createSupplieDescription",1,"form-control",3,"ngModelChange","ngModel"],["for","createQuantity",1,"form-label"],["type","number","id","createQuantity","min","0",1,"form-control",3,"ngModelChange","keydown","ngModel"],["for","createUnitOfMesureId",1,"form-label"],["id","createUnitOfMesureId",1,"form-select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[3,"value"],["type","text","id","createSupplieName",1,"form-control",3,"ngModelChange","ngModel","disabled"],["for","formFile",1,"form-label"],["type","file","id","formFile",1,"form-control",3,"change"]],template:function(e,i){if(e&1){let _=x();o(0,"div",2)(1,"div",3)(2,"h1",4),l(3,"Mantenimiento de Productos"),r(),o(4,"button",5)(5,"i",6),m("click",function(){return d(_),u(i.openCreateModal())}),r()()(),o(6,"div",7),w(7,Se,17,4,"div",8),r(),w(8,Ee,32,9,"ng-template",null,0,B)(10,Ve,19,3,"ng-template",null,1,B),r()}e&2&&(s(7),f("ngForOf",i.productos))},dependencies:[A,R,q,j,le,Q,U,se,z]});let c=a;return c})();var S=Z(ue());var ke=["editModal"],Ie=c=>({color:c});function Ne(c,a){if(c&1){let n=x();o(0,"button",16),m("click",function(){d(n);let e=p().$implicit,i=p();return u(i.deactivateProduct(e))}),M(1,"i",19),r()}}function Be(c,a){if(c&1){let n=x();o(0,"tr")(1,"th",14),l(2),r(),o(3,"td"),l(4),r(),o(5,"td"),l(6),r(),o(7,"td"),M(8,"i",15),l(9),r(),o(10,"td")(11,"button",16),m("click",function(){let e=d(n).$implicit,i=p();return u(i.openEditModal(e))}),M(12,"i",17),r(),w(13,Ne,2,0,"button",18),r()()}if(c&2){let n=a.$implicit,t=p();s(2),P(n.idProductType),s(2),P(n.productType),s(2),P(n.description),s(2),f("ngStyle",te(6,Ie,n.state=="Activo"?"#57bf31":"#ff2301")),s(),D(" \xA0\xA0",n.state," "),s(4),f("ngIf",t.selectStateProduct==="Activo")}}function We(c,a){if(c&1){let n=x();o(0,"div",24)(1,"label",33),l(2,"Estado"),r(),o(3,"select",34),C("ngModelChange",function(e){d(n);let i=p(2);return h(i.selectedProductType.state,e)||(i.selectedProductType.state=e),u(e)}),o(4,"option",6),l(5,"Activo"),r(),o(6,"option",7),l(7,"Inactivo"),r()()()}if(c&2){let n=p(2);s(3),g("ngModel",n.selectedProductType.state)}}function Oe(c,a){if(c&1){let n=x();o(0,"div",20)(1,"h5",21),l(2),r(),o(3,"button",22),m("click",function(){let e=d(n).$implicit;return u(e.dismiss("Cross click"))}),r()(),o(4,"div",23)(5,"div",24)(6,"label",25),l(7,"Nombre"),r(),o(8,"input",26),C("ngModelChange",function(e){d(n);let i=p();return h(i.selectedProductType.productType,e)||(i.selectedProductType.productType=e),u(e)}),r()(),o(9,"div",24)(10,"label",27),l(11,"Descripci\xF3n"),r(),o(12,"input",28),C("ngModelChange",function(e){d(n);let i=p();return h(i.selectedProductType.description,e)||(i.selectedProductType.description=e),u(e)}),r()(),w(13,We,8,1,"div",29),r(),o(14,"div",30)(15,"button",31),m("click",function(){let e=d(n).$implicit;return u(e.dismiss("Cross click"))}),l(16,"Cancelar"),r(),o(17,"button",32),m("click",function(){let e=d(n).$implicit,i=p();return u(i.saveChanges(e))}),l(18,"Guardar Cambios"),r()()}if(c&2){let n=p();s(2),P(n.isEditMode?"Editar Categoria":"Crear Categoria"),s(6),g("ngModel",n.selectedProductType.productType),s(4),g("ngModel",n.selectedProductType.description),s(),f("ngIf",n.selectStateProduct==="Inactivo")}}var Ce=(()=>{let a=class a{constructor(t,e){this.productTypeService=t,this.modalService=e,this.tipoProductos=[],this.selectedProductType={idProductType:0,productType:"",description:"",state:""},this.selectStateProduct="Activo",this.isEditMode=!1}ngOnInit(){this.listarTipoProducto()}listarTipoProducto(){return y(this,null,function*(){let t=yield this.productTypeService.listarTipoProductos(this.selectStateProduct).toPromise();this.tipoProductos=t})}onStateChange(t){return y(this,null,function*(){this.selectStateProduct=t.target.value,yield this.listarTipoProducto()})}openCreateModal(){this.selectedProductType=new T,this.isEditMode=!1,this.modalService.open(this.editModal,{ariaLabelledBy:"openCreateModal"})}openEditModal(t){this.selectedProductType=V({},t),this.isEditMode=!0,this.modalService.open(this.editModal,{ariaLabelledBy:"editModalLabel"})}saveChanges(t){return y(this,null,function*(){if((yield S.default.fire({title:"Cuidado",text:"\xBFEst\xE1 seguro de guardar los cambios?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xED",cancelButtonText:"No"})).isConfirmed)try{let i={idProductType:this.selectedProductType.idProductType,productType:this.selectedProductType.productType,description:this.selectedProductType.description,state:this.selectedProductType.state};this.isEditMode?(yield this.productTypeService.actualizarTipoProductos(i).toPromise(),this.listarTipoProducto(),S.default.fire("Cambios guardados!","El elemento ha sido actualizado.","success")):(yield this.productTypeService.crearTipoProductos(i).toPromise(),this.listarTipoProducto(),S.default.fire("Cambios guardados!","El elemento ha sido creado.","success"))}catch{S.default.fire("Error","Hubo un error al actualizar los cambios.","error")}else S.default.fire("Cancelado","La acci\xF3n ha sido cancelada","info");t.close()})}deactivateProduct(t){return y(this,null,function*(){if((yield S.default.fire({title:"Cuidado",text:"\xBFEst\xE1 seguro de desactivar esta categoria?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xED",cancelButtonText:"No"})).isConfirmed)try{t.state="Inactivo",yield this.productTypeService.actualizarTipoProductos(t).toPromise(),this.listarTipoProducto(),S.default.fire("Producto Desactivado!","El producto ha sido desactivado.","success")}catch{S.default.fire("Error","Hubo un error al desactivar el producto.","error")}else S.default.fire("Cancelado","La acci\xF3n ha sido cancelada","info")})}};a.\u0275fac=function(e){return new(e||a)(v(K),v(H))},a.\u0275cmp=F({type:a,selectors:[["app-categories-maintenance"]],viewQuery:function(e,i){if(e&1&&k(ke,5),e&2){let _;I(_=N())&&(i.editModal=_.first)}},decls:30,vars:2,consts:[["editModal",""],[1,"container-fluid"],[1,"card-header","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"d-flex","align-items-center"],["id","inputState",1,"form-select","w-auto","me-2",3,"ngModelChange","change","ngModel"],["value","Activo"],["value","Inactivo"],["type","button",1,"btn","btn-outline-success",3,"click"],[1,"fa-solid","fa-plus","fa-2xl",2,"color","#63E6BE"],[1,"card-body"],[1,"table","table-secondary","table-striped","text-center"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"],[1,"fa-solid","fa-circle-dot","fa-lg",3,"ngStyle"],["type","button",1,"btn","btn-transparent",3,"click"],[1,"fa-regular","fa-pen-to-square","fa-xl",2,"color","#2657ab"],["type","button","class","btn btn-transparent",3,"click",4,"ngIf"],[1,"fa-regular","fa-trash-can","fa-xl",2,"color","#ac1111"],[1,"modal-header"],["id","editModalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mb-3"],["for","editProductType",1,"form-label"],["type","text","id","editProductType",1,"form-control",3,"ngModelChange","ngModel"],["for","editDescription",1,"form-label"],["type","text","id","editDescription",1,"form-control",3,"ngModelChange","ngModel"],["class","mb-3",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["for","editState",1,"form-label"],["id","editState",1,"form-select",3,"ngModelChange","ngModel"]],template:function(e,i){if(e&1){let _=x();o(0,"div",1)(1,"div",2)(2,"h1",3),l(3,"Mantenimiento de Categorias"),r(),o(4,"div",4)(5,"select",5),C("ngModelChange",function(E){return d(_),h(i.selectStateProduct,E)||(i.selectStateProduct=E),u(E)}),m("change",function(E){return d(_),u(i.onStateChange(E))}),o(6,"option",6),l(7,"Activo"),r(),o(8,"option",7),l(9,"Inactivo"),r()(),o(10,"button",8),m("click",function(){return d(_),u(i.openCreateModal())}),M(11,"i",9),r()()(),o(12,"div",10)(13,"table",11)(14,"thead")(15,"tr")(16,"th",12),l(17,"ID"),r(),o(18,"th",12),l(19,"Nombre"),r(),o(20,"th",12),l(21,"Descripcion"),r(),o(22,"th",12),l(23,"Estado"),r(),o(24,"th",12),l(25,"Accion"),r()()(),o(26,"tbody"),w(27,Be,14,8,"tr",13),r()()(),w(28,Oe,19,4,"ng-template",null,0,B),r()}e&2&&(s(5),g("ngModel",i.selectStateProduct),s(22),f("ngForOf",i.tipoProductos))},dependencies:[A,ie,ne,R,q,j,Q,U,z]});let c=a;return c})();var Fe=[{path:"products-maintenance",component:he},{path:"categories-maintenance",component:Ce}],ye=(()=>{let a=class a{};a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=L({type:a}),a.\u0275inj=O({imports:[Y.forChild(Fe),Y]});let c=a;return c})();var dt=(()=>{let a=class a{};a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=L({type:a}),a.\u0275inj=O({imports:[oe,ye,_e,de]});let c=a;return c})();export{dt as ProductsModule};
